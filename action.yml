name: 'Hello World'
description: 'Scan Image'
inputs:
  tags:  # id of input
    description: 'Who to greet'
    required: true
    default: ''
outputs:
  random-number:
    description: "Random number"
    value: ${{ steps.random-number-generator.outputs.random-id }}
runs:
  using: "composite"
  steps:
    - id: download-lw-scanner
      run: |
        curl -sSL https://github.com/lacework/lacework-vulnerability-scanner/releases/latest/download/lw-scanner-linux-amd64 -o lw-scanner
        chmod +x lw-scanner
      shell: bash
    - run: ./scan.sh ${{ inputs.tags }}
      shell: bash
    - uses: actions/github-script@v6
      with:
        script: |
          console.log(context);
          const exec = require('child_process');
          console.log(exec.execSync('ls').toString());
          console.log(exec.execSync('pwd').toString());
          
          const fs = require('fs');
          results = JSON.parse(fs.readFileSync('lw-scan-results.json'));
          console.log(results);
          await github.rest.issues.createComment({
              issue_number: context.issue.number,
              owner: context.repo.owner,
              repo: context.repo.repo,
              body: 'Welcome, new contributor!'
          })
